# AI Trading Bot v2 - ê¸°ë³¸ ì„¤ì •
# ================================
# ëª©í‘œ: ì¼ 1% ìˆ˜ìµë¥ , ì†ìµë¹„ 2:1 ê¸°ì¤€ ìµœì í™”

# íŠ¸ë ˆì´ë”© ê¸°ë³¸ ì„¤ì •
trading:
  initial_capital: 10000000      # ì´ˆê¸° ìë³¸ê¸ˆ (1000ë§Œì›)
  market: KRX                    # ì‹œì¥ (KRX, NASDAQ, NYSE)

  # ê±°ë˜ ì‹œê°„ëŒ€
  enable_pre_market: true        # í”„ë¦¬ì¥ (08:00~08:50)
  enable_next_market: true       # ë„¥ìŠ¤íŠ¸ì¥ (15:30~20:00)

  # ìˆ˜ìˆ˜ë£Œ (í•œêµ­íˆ¬ìì¦ê¶Œ ê¸°ì¤€, 2024ë…„ ì„¸ìœ¨ ì ìš©)
  fees:
    buy_rate: 0.00015            # ë§¤ìˆ˜ ìˆ˜ìˆ˜ë£Œ 0.015%
    sell_rate: 0.00195           # ë§¤ë„ ìˆ˜ìˆ˜ë£Œ 0.015% + ì¦ê¶Œê±°ë˜ì„¸ 0.18%

  # ìŠ¬ë¦¬í”¼ì§€
  slippage:
    expected_ticks: 1
    max_ticks: 3


# ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì„¤ì • (ì¼ 1% ëª©í‘œ ìµœì í™”)
risk:
  # === ì¼ì¼ í•œë„ ===
  daily_max_loss_pct: 3.0        # í•˜ë£¨ ìµœëŒ€ ì†ì‹¤ 3% (5%â†’3% ì¶•ì†Œ: ì¼ 1% ëª©í‘œ ì‹œ 3ì¼ì¹˜ ì†ì‹¤ì´ ìƒí•œ)
  daily_max_trades: 50           # ì¼ì¼ ìµœëŒ€ ê±°ë˜ 50íšŒ (15â†’50 í™•ëŒ€: ì˜¤ì „ ê¸°íšŒ ì†ì‹¤ ë°©ì§€)

  # === í¬ì§€ì…˜ ê´€ë¦¬ (ì§„ì§œ ìŠ¤ìœ™ ì „ëµ: ì§‘ì¤‘ íˆ¬ì) ===
  base_position_pct: 18.0        # ê¸°ë³¸ í¬ì§€ì…˜ ë¹„ìœ¨ 18% (15â†’18: í™•ì‹  ì¢…ëª© ë¹„ì¤‘ í™•ëŒ€)
  max_position_pct: 35.0         # ìµœëŒ€ í¬ì§€ì…˜ ë¹„ìœ¨ 35% (30â†’35: ê°•í•œ ì‹œê·¸ë„ ì§‘ì¤‘)
  max_positions: 6               # ìµœëŒ€ ë™ì‹œ í¬ì§€ì…˜ 6ê°œ (8â†’6: ì§‘ì¤‘ íˆ¬ì)
  min_cash_reserve_pct: 10.0     # ìµœì†Œ í˜„ê¸ˆ ë³´ìœ  10% (ìœ ì§€)
  min_position_value: 500000     # ìµœì†Œ í¬ì§€ì…˜ ê¸ˆì•¡ (50ë§Œì›)
  dynamic_max_positions: true    # ìì‚° ê·œëª¨ì— ë”°ë¼ max_positions ë™ì  ì¡°ì •

  # === ì†ì ˆ/ìµì ˆ (ìŠ¤ìœ™ ì „ëµ: ë„“ì€ í­) ===
  default_stop_loss_pct: 8.0     # ê¸°ë³¸ ì†ì ˆ 8.0% (3â†’8: ì¼ì¤‘ ë³€ë™ì„± í¡ìˆ˜)
  default_take_profit_pct: 20.0  # ê¸°ë³¸ ìµì ˆ 20.0% (7â†’20: íŠ¸ë Œë“œ ì™„ì£¼)
  trailing_stop_pct: 5.0         # íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘ 5.0% (3â†’5: ì´ìµ ë³´í˜¸ ê°•í™”)

  # === íŠ¹ë³„ ìƒí™© ===
  hot_theme_position_pct: 50.0   # í•« í…Œë§ˆ ì‹œ ìµœëŒ€ í¬ì§€ì…˜ 50% (70â†’50: í…Œë§ˆ ì§‘ì¤‘ ë¦¬ìŠ¤í¬ ì™„í™”)
  momentum_multiplier: 1.5       # ê°•í•œ ëª¨ë©˜í…€ ì‹œ ë°°íŒ… ì¦ê°€


# ì „ëµ ì„¤ì •
strategies:
  # ëª¨ë©˜í…€ ë¸Œë ˆì´í¬ì•„ì›ƒ (ì£¼ë ¥ ì „ëµ: ì§„ì§œ ìŠ¤ìœ™ 3~7ì¼)
  momentum_breakout:
    enabled: true  # ì£¼ë ¥ í™œì„±í™”
    holding_period_days: 5       # ëª©í‘œ ë³´ìœ  ê¸°ê°„ 5ì¼ (ìŠ¤ìœ™)
    breakout_period: 20          # ëŒíŒŒ ê¸°ì¤€ ê¸°ê°„ (ì¼)
    confirm_candles: 2           # ëŒíŒŒ í™•ì¸ ìº”ë“¤ ìˆ˜
    min_breakout_pct: 1.5        # ìµœì†Œ ëŒíŒŒ ë¹„ìœ¨ (0.5â†’1.5: ëª…í™•í•œ ëŒíŒŒë§Œ)
    volume_surge_ratio: 3.5      # ê±°ë˜ëŸ‰ ê¸‰ì¦ ê¸°ì¤€ (2.5â†’3.5: ê°•í•œ ê±°ë˜ëŸ‰ë§Œ)

    # ì ìˆ˜ ê°€ì¤‘ì¹˜
    weight_price_momentum: 40.0
    weight_volume_momentum: 30.0
    weight_high_proximity: 20.0
    weight_theme: 10.0

    # ì²­ì‚° ì¡°ê±´ (ì§„ì§œ ìŠ¤ìœ™: ëŒ€í­ í™•ëŒ€)
    stop_loss_pct: 8.0           # 3â†’8: ì¼ì¤‘ ë³€ë™ì„± í¡ìˆ˜
    take_profit_pct: 20.0        # 7â†’20: íŠ¸ë Œë“œ ì™„ì£¼
    trailing_stop_pct: 5.0       # 3â†’5: ê³ ì  ëŒ€ë¹„ 5% í•˜ë½ í—ˆìš©

  # í…Œë§ˆ ì¶”ì¢… (ì¤‘ê¸° 2~4ì¼ë¡œ í™•ëŒ€)
  theme_chasing:
    enabled: true                # í™œì„±í™” (ì¤‘ê¸° ì „ëµ)
    holding_period_days: 3       # ëª©í‘œ ë³´ìœ  ê¸°ê°„ 3ì¼ (2â†’3: ìŠ¤ìœ™ ì „í™˜)
    min_theme_score: 70
    entry_window_minutes: 30
    stop_loss_pct: 6.0           # 2.5â†’6: ìŠ¤ìœ™ ë³€ë™ì„± ìˆ˜ìš©
    take_profit_pct: 15.0        # 5â†’15: í…Œë§ˆ ì§€ì† ìˆ˜ìµ í™•ëŒ€
    trailing_stop_pct: 4.0       # 2â†’4: ì¤‘ê¸° ì—¬ìœ  í™•ë³´

  # ê°­ìƒìŠ¹ ì¶”ì¢… (ì§„ì§œ ìŠ¤ìœ™ 3~7ì¼)
  gap_and_go:
    enabled: true                # í™œì„±í™” (ìŠ¤ìœ™ ì „ëµ)
    holding_period_days: 5       # ëª©í‘œ ë³´ìœ  ê¸°ê°„ 5ì¼ (ìŠ¤ìœ™)
    min_gap_pct: 2.0
    max_gap_pct: 10.0
    entry_delay_minutes: 30
    pullback_pct: 1.0
    min_volume_ratio: 2.8        # 2.0â†’2.8: ê±°ë˜ëŸ‰ í™•ì¸ ê°•í™”
    stop_loss_pct: 8.0           # 3â†’8: ì¼ì¤‘ ë³€ë™ì„± í¡ìˆ˜
    take_profit_pct: 20.0        # 7â†’20: íŠ¸ë Œë“œ ì™„ì£¼
    trailing_stop_pct: 5.0       # 3â†’5: ê³ ì  ëŒ€ë¹„ 5% í•˜ë½ í—ˆìš©

  # í‰ê·  íšŒê·€ (ê¸‰ë½ ë°˜ë“±, ë³´ì¡° ì „ëµ)
  mean_reversion:
    enabled: false  # ë³´í˜¸ ëª¨ë“œ: ë¹„í™œì„±í™”
    max_rsi: 30.0
    min_decline_pct: -10.0
    min_volume_ratio: 1.5
    stop_loss_pct: 3.0           # ìœ ì§€: ì—­ì¶”ì„¸ íŠ¹ì„±ìƒ ë„“ì€ SL í•„ìš”
    take_profit_pct: 5.0
    trailing_stop_pct: 2.0
    position_size_multiplier: 0.5  # í¬ì§€ì…˜ ì ˆë°˜ (ì—­ì¶”ì„¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬)


# ë¸Œë¡œì»¤ ì„¤ì •
broker:
  type: kis                      # kis, alpaca, ib
  kis:
    env: prod                    # prod, dev (ëª¨ì˜íˆ¬ì)
    timeout_seconds: 15


# ë°ì´í„° ì„¤ì •
data:
  realtime_source: kis_websocket

  storage:
    type: file
    file_path: ./data/prices

  history:
    lookback_days: 60
    cache_enabled: true


# ë¡œê¹… ì„¤ì •
logging:
  level: INFO
  file_enabled: true
  file_path: ./logs
  rotation: 1 day
  retention: 7 days


# ì•Œë¦¼ ì„¤ì •
notification:
  telegram:
    enabled: true

  alerts:
    on_signal: false
    on_order: false
    on_fill: false
    on_risk_alert: false
    on_daily_summary: true


# ë¶„í•  ìµì ˆ ê´€ë¦¬ì (3ë‹¨ê³„ ìµì ˆ + ATR ê¸°ë°˜ ë™ì  ì†ì ˆ) - ì§„ì§œ ìŠ¤ìœ™
exit_manager:
  enable_partial_exit: true

  # 3ë‹¨ê³„ ìµì ˆ ì‹œìŠ¤í…œ (ì§„ì§œ ìŠ¤ìœ™: ëŒ€í­ í™•ëŒ€)
  first_exit_pct: 5.0             # 1ì°¨ ìµì ˆ +5% (3â†’5: ìŠ¤ìœ™ ì•ˆì • ìµì ˆ)
  first_exit_ratio: 0.20          # 20% ë§¤ë„ (ìœ ì§€: ì²œì²œíˆ ìµì ˆ)
  second_exit_pct: 12.0           # 2ì°¨ ìµì ˆ +12% (5â†’12: íŠ¸ë Œë“œ ì¤‘ê°„)
  second_exit_ratio: 0.30         # ì”ì—¬ 80%ì˜ 30% = ì „ì²´ 24% ë§¤ë„
  third_exit_pct: 20.0            # 3ì°¨ ìµì ˆ +20% (7â†’20: íŠ¸ë Œë“œ ì™„ì£¼)
  third_exit_ratio: 0.5           # ì”ì—¬ 56%ì˜ 50% = ì „ì²´ 28% ë§¤ë„ (ë‚˜ë¨¸ì§€ 28%ëŠ” trailing)

  # ATR ê¸°ë°˜ ë™ì  ì†ì ˆ (ë³€ë™ì„± ëŒ€ì‘)
  stop_loss_pct: 8.0              # ê¸°ë³¸ ì†ì ˆ 8.0% (3â†’8: ì¼ì¤‘ ë³€ë™ì„± í¡ìˆ˜)
  enable_dynamic_stop: true       # ATR ê¸°ë°˜ ë™ì  ì†ì ˆ í™œì„±í™”
  atr_multiplier: 3.0             # ATR Ã— 3.0 (2.5â†’3: ìŠ¤ìœ™ ë³€ë™ì„± ëŒ€ì‘)
  min_stop_pct: 6.0               # ìµœì†Œ ì†ì ˆí­ 6.0% (3â†’6: ìŠ¤ìœ™ í•˜í•œ)
  max_stop_pct: 10.0              # ìµœëŒ€ ì†ì ˆí­ 10.0% (7â†’10: ìŠ¤ìœ™ ìƒí•œ)

  # íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘ (ì§„ì§œ ìŠ¤ìœ™)
  trailing_stop_pct: 5.0          # ê³ ì  ëŒ€ë¹„ í•˜ë½ë¥  5.0% (3â†’5: ì´ìµ ë³´í˜¸)
  trailing_activate_pct: 5.0      # íŠ¸ë ˆì¼ë§ í™œì„±í™” 5% (3â†’5: 1ì°¨ ìµì ˆê³¼ ë™ì¼)

  include_fees: true


# ì¢…ëª© ìŠ¤í¬ë¦¬ë„ˆ
screener:
  scan_interval_minutes: 5        # ìŠ¤ìº” ì£¼ê¸° 5ë¶„ (10â†’5: ê¸°íšŒ ë¹ ë¥¸ í¬ì°©)
  min_volume_ratio: 2.0
  min_change_pct: 1.0
  max_change_pct: 15.0
  min_market_cap: 1000


# í…Œë§ˆ íƒì§€ê¸°
theme_detector:
  scan_interval_minutes: 10       # í…Œë§ˆ ìŠ¤ìº” 10ë¶„ (15â†’10: í…Œë§ˆ ì´ˆê¸° í¬ì°©)
  min_news_count: 3
  min_theme_score: 70.0


# US ì‹œì¥ ì˜¤ë²„ë‚˜ì´íŠ¸ ì‹œê·¸ë„
us_market:
  enabled: true
  fetch_time: "07:30"
  cache_ttl_hours: 24


# ìê°€ ì§„í™” ì—”ì§„
evolution:
  enabled: true
  analysis_days: 7
  min_trades_for_evolution: 5
  min_confidence_to_apply: 0.6
  auto_rollback_threshold: -2.0
  evaluation_period_days: 7
  send_telegram: false


# ì½”ë“œ ìë™ ì§„í™” (Claude Code CLI)
code_evolution:
  enabled: true                    # ğŸŸ¢ í™œì„±í™” (ì½”ë“œ ìë™ ê°œì„ )
  schedule_daily: true             # ë§¤ì¼ ì‹¤í–‰ (true) or ì£¼ê°„ ì‹¤í–‰ (false)
  schedule_hour: 18                # ì‹¤í–‰ ì‹œê° (24ì‹œê°„, 18=ì˜¤í›„ 6ì‹œ)
  schedule_day: 5                  # ì£¼ê°„ ì‹¤í–‰ ì‹œ ìš”ì¼ (0=ì›” ~ 6=ì¼, 5=í† )
  auto_merge: true                 # ğŸŸ¢ ìë™ ë¨¸ì§€ (true=ê²€ì¦ í†µê³¼ ì‹œ ìë™ ë¨¸ì§€+ì¬ì‹œì‘)
  max_changed_files: 10            # ìµœëŒ€ ë³€ê²½ íŒŒì¼ ìˆ˜
  claude_timeout: 300              # Claude CLI íƒ€ì„ì•„ì›ƒ (ì´ˆ)


# ì¢…ëª© ë§ˆìŠ¤í„°
stock_master:
  enabled: true
  refresh_time: "18:00"              # ì¼ì¼ ê°±ì‹  ì‹œê°„
  skip_weekends: true                # ì£¼ë§ ê°±ì‹  ìŠ¤í‚µ

  # ì¶”ê°€ ì„¤ì •
  auto_initial_refresh: true         # ë¹ˆ í…Œì´ë¸” ì‹œ ìë™ ê°±ì‹ 
  cache_ttl_hours: 24                # ìºì‹œ TTL (ì‹œê°„)
  alert_on_consecutive_failures: 3   # Nì¼ ì—°ì† ì‹¤íŒ¨ ì‹œ ì•Œë¦¼


# ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
scheduler:
  morning_report_time: "08:00"
  evening_report_time: "17:00"
  evolution_time: "20:30"
  nxt_refresh_hour: 6
  news_impact_threshold: 5


# ëŒ€ì‹œë³´ë“œ ì„¤ì •
dashboard:
  enabled: true
  host: "0.0.0.0"
  port: 8080


# ì›Œì¹˜ë¦¬ìŠ¤íŠ¸ (ëª¨ë‹ˆí„°ë§ ì¢…ëª©)
watchlist:
  # í•µì‹¬ ëŒ€í˜•ì£¼
  - code: "005930"
    name: "ì‚¼ì„±ì „ì"
    sector: "ë°˜ë„ì²´"

  - code: "000660"
    name: "SKí•˜ì´ë‹‰ìŠ¤"
    sector: "ë°˜ë„ì²´"

  - code: "373220"
    name: "LGì—ë„ˆì§€ì†”ë£¨ì…˜"
    sector: "2ì°¨ì „ì§€"

  # í…Œë§ˆì£¼ (í•„ìš”ì‹œ ì¶”ê°€)
